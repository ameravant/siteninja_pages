- @responsive = true
- content_for :meta_title do
  Pages & Navigation

- content_for :head do
  %style{:type => "text/css", :media => "screen"}
    ==#filter-options { display: none; }
    - if params[:commit] == "Filter"
      ==#filter-options { display: block; }
    ==#filter-options, #batch-options { padding: 10px; }
    ==#filter-options.box h2, #batch-options.box h2 { margin: 0; padding: 0; font-size: 1.2em; }
    ==#filter-template, #batch-template { padding: 8px 0; }
    ==#filter-options label, #batch-options label { width: 100px; float: left; display: block; padding: 5px 0; }
    ==#filter-options .submit, #batch-options .submit { padding: 0; margin: 10px 0 0; }
    ==#nav-filters { margin: 10px 0 0; display: none; }
    ==#nav-filters div { margin: 0 0 0 0; }
    ==#nav-filters label { display: inline; width: inherit; float: none; }
    ==#nav-filters input[type='checkbox'] { margin: 8px 3px 0; }
    ==.full-url { display: none; }
    ul.sortable { list-style: none; margin: 0 0 0 -40px; }
    ul.sortable ul { margin: 0 0 0 -20px; list-style: none; }
    ul.sortable li { line-height: 2em; }
    div.page-title-header { float: left; width: 60px; font-weight: bold; color: #666; margin: 0 0 0 10px; }
    
    div.page-options-header { float: right; width: 86px; text-align: left; font-weight: bold; color: #666; }
    div.page-images-header { float: right; width: 50px; text-align: left; font-weight: bold; margin-right: 20px; color: #666; }
    div.page-testimonials-header { float: right; width: 100px; text-align: left; font-weight: bold; margin-right: 20px; color: #666; }
    
    div.page-type-header { float: right; width: 75px; text-align: left; font-weight: bold; margin-right: 20px; color: #666; }
    div.page-testimonials-header { float: right; width: 100px; text-align: left; font-weight: bold; margin-right: 20px; color: #666; }
    div.page-title { float: left; margin: 5px 20px; width: 397px; line-height: 18px; }
    ul.paginated div.page-title { margin: 5px 5px 5px 10px; }
    li.odd, li.even { padding: 2px 0 !important; }
    ul ul div.page-title { width: 377px; }
    ul ul ul div.page-title { width: 357px; }
    ul ul ul ul div.page-title { width: 337px; }
    ul ul ul ul ul div.page-title { width: 317px; }
    ul ul ul ul ul ul div.page-title { width: 297px; }
    ==.page-title .desktop-only { display: block; float: right; font-size: .9em; margin-top: 1px; }
    ==input[type='checkbox'] { margin-left: 10px; }
    ==input[type='checkbox'].select-all { margin-left: 0; float: right; }
    ==.trash-spacer { width: 0; display: inline; margin-left: 20px; }
    div.page-title a {  }
    div.page-options { text-align: left; float: right; width: 86px; }
    div.page-images { float: right; margin-right: 20px; width: 50px; text-align: left; }
    div.page-type { float: right; margin-right: 20px; width: 75px; text-align: left; font-size: .8em; }
    div.page-testimonials { float: right; margin-right: 20px; width: 100px; text-align: left; }
    div.page-menu { float: right; margin-right: 20px; width: 50px; }
    ul.sortable .drop_hover { background: url(http://files.artweb-design.de/javascript/scriptaculous-sortabletree/demo/drag.png) no-repeat bottom left; }
    ul.sortable .drop_top {	background-position: top left; }
    ul.sortable .drop_bottom { background-position: bottom left; }
    ul.sortable .drop_insert { background-position: 20px 100%; }
    ul.sortable li { overflow: hidden; }
    div#droppable_top { height: 10px; background: #efefef; margin: 0; }
    div#droppable_top span, div.droppable span { display: none; font-size: .9em; font-weight: bold; }
    div.droppable { height: 10px; background: #dedede; margin-left: 20px; }
    div.draghover span { display: block !important; padding: 5px; background: #e7ffe1 !important; border-left: 1px dotted #296e19; line-height: 25px; position: relative; z-index: 5000000; top: -40px; border: 1px dotted #5a9605; }
    div.draghover { background: #3b6232; }
    img.handle { float: left; position: absolute !important; margin: 3px 0 0; }
    ==.menu-item { border-top: #ccc 1px solid; }
    ==.menu-item-inner.hidden { background: #efefef; }
    ==ul.top-options { margin: 0; padding: 0; list-style: none; }
    ==.pagination { margin: 5px 10px; }
    @media screen and (max-width: 549px) {
    ==.page-title-header, .page-options-header, .page-testimonials-header, .page-images-header, .page-type-header { display: none; }
    ==div.page-title { margin: 5px 0; font-size: 1.4em; padding: 0 5px; }
    ==ul ul div.page-title {clear: right; width: 100%; max-width: 100%; overflow: hidden; white-space: nowrap; }
    ==div.page-options, div.page-testimonials, div.page-images, div.page-menu, div.page-type { float: right !important; margin: 0 0 0 10px; width: inherit; }
    ==div.droppable { display: none; }
    ==ul.sortable a .icon { margin: 0 1px; }  
    }
#page-index
  
  -#%form{:action => batch_admin_pages_path, :method => "post"}
  
  - if @paginate_page_index    
    .float-right
      %ul.top-options
        %li= link_to("Show Navigation View", "/admin/pages?paginate_page_index=false", :title => "Display sortable tree-navigation view of all Menus.")
        - if !@cms_config['site_settings']['paginate_page_index']
          %li= link_to("Save as default view", "/admin/pages?default_view=paginate")
    %h1= large_icon('Clipboard Copy') + ' ' + yield(:meta_title).strip
    = clear
    .box
      .float-right= render :partial => "/shared/search"
      %ul
        %li
          %span.hmenu
            = icon "Plus", new_admin_page_path
            = link_to "Make a New Page", new_admin_page_path
        %li
          %span.hmenu
            = icon "Plus", new_admin_menu_path
            = link_to "Add Menu", new_admin_menu_path
        %li.desktop-only
          %span.hmenu
            = icon "Plus", footer_admin_pages_path
            = link_to "Organize Footer Menus", footer_admin_pages_path
    = link_to("Filter Pages", "javascript:void(0)", :onclick => "jQuery('#filter-options').slideToggle()")
    .box#filter-options
      %h2 Filter Pages:
      = form_tag('/admin/pages', :method => :get)
      = hidden_field_tag("filter","true")
      #filter-template
        = label_tag 'template_id', "Template"
        = select_tag 'template_id', options_for_select(@templates.collect{|c| [c.title, c.id]}.insert(0,["Filter by Template", nil]), :selected => params[:template_id].to_i)
      - if @cms_config['site_settings']['enable_responsive_layouts']
        #filter-layout
          = label_tag 'main_column_id', "Layout"
          = select_tag 'main_column_id', options_for_select(@layouts.collect{|c| [c.title, c.id]}.insert(0,["Filter by Layout", nil]), :selected => params[:main_column_id].to_i)
      - else
        #filter-main-column
          = label_tag 'main_column_id', "Main Column"
          = select_tag 'main_column_id', options_for_select(@layouts.collect{|c| [c.title, c.id]}.insert(0,["Filter by Main Column", nil]))
        #filter-side-column
          = label_tag 'column_id', "Side Column"
          = select_tag 'column_id', options_for_select(@side_columns.collect{|c| [c.title, c.id]}.insert(0,["Filter by Side Column", nil]))
      #nav-filters
        #filter-show-in-main-menu
          = check_box_tag 'show_in_main_menu'
          = label_tag 'show_in_main_menu', 'Visible in Main Menu'
        #filter-show-in-secondary-menu
          = check_box_tag 'show_in_side_menu'
          = label_tag 'show_in_side_menu', "Visible in Secondary Menus"
      .submit
        = submit_tag "Filter"
        - if params[:commit] == "Filter"
          = link_to("Clear", "/admin/pages")
      </form>
    
    = render :partial => "paginated_index"
    %br
    
    = render :partial => "batch_options"

  - else
    .float-right
      %ul.top-options
        %li= link_to("Show Alphabetical View", "/admin/pages?paginate_page_index=true", :title => "Display searchable alphabetical view of Pages.")
        - if @cms_config['site_settings']['paginate_page_index']
          %li= link_to("Save as default view", "/admin/pages?default_view=tree")
        %li= link_to("Display URLs", "javascript:void(0)", :id => "show-url")
    %h1= large_icon('Clipboard Copy') + ' ' + yield(:meta_title).strip
    = clear
    .box
      #reorder_status.gray.float-right{:style => "display: none"}
        = spinner
        Reordering pages...
      %ul
        %li
          %span.hmenu
            = icon "Plus", new_admin_page_path
            = link_to "Make a New Page", new_admin_page_path
        %li
          %span.hmenu
            = icon "Plus", new_admin_menu_path
            = link_to "Add Menu", new_admin_menu_path
        %li.desktop-only
          %span.hmenu
            = icon "Plus", footer_admin_pages_path
            = link_to "Organize Footer Menus", footer_admin_pages_path
    %br
    #ajax-loading
      == #{image_tag(spinner_loc, :alt => "loading")} Loading Pages...
    #ajax-index
    - content_for :footer do
      %script{:type => "text/javascript"}
        jQuery(function() {
        jQuery('#ajax-index').load('/admin/pages/ajax_index');
        });
        jQuery('#show-url').bind("click", function(){
        jQuery('.full-url').toggle();
        });
        jQuery(document).ready(function() {
        jQuery(".fancy-mini-iframe").fancybox({ 
        'zoomSpeedIn': 300,
        'zoomSpeedOut': 300,
        'overlayShow': false,
        'hideOnContentClick': 'false',
        'easingOut': 'easeOutQuad',
        'easingIn': 'easeInQuad',
        'type': 'iframe',
        'width': 300,
        'autoScale': true
        }); 
        jQuery(".fancy-iframe-large").fancybox({ 
        'zoomSpeedIn': 300,
        'zoomSpeedOut': 300,
        'overlayShow': true,
        'hideOnContentClick': 'true',
        'easingOut': 'easeOutQuad',
        'easingIn': 'easeInQuad',
        'type': 'iframe',
        'width': '94%',
        'autoScale': true,
        'height':'94%'
        });
        jQuery(".select-all").click(function(){
        jQuery(':checkbox').prop('checked', this.checked);
        });
        });
- if session[:cache] == true
  %iframe{:src => "/admin/columns?cache=true", :style => "height: 1px; border: 0; width: 1px"}